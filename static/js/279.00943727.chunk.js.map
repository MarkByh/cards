{"version":3,"file":"static/js/279.00943727.chunk.js","mappings":"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","sources":["webpack://user-cards/./src/components/Tweets/TweetCard/tweetsCard.module.css?2f74","services/api.js","components/Tweets/TweetCard/TweetsCard.jsx","webpack://user-cards/./src/components/Tweets/Tweets.module.css?20f9","components/Tweets/TweetsPage.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"usersList\":\"tweetsCard_usersList__goyGX\",\"userCard\":\"tweetsCard_userCard__NM+sf\",\"logo\":\"tweetsCard_logo__iIpmU\",\"background\":\"tweetsCard_background__W4IGB\",\"Cardline\":\"tweetsCard_Cardline__os6vc\",\"avatarCircle\":\"tweetsCard_avatarCircle__t1FA2\",\"avatar\":\"tweetsCard_avatar__KAt3i\",\"cardText\":\"tweetsCard_cardText__ewFqO\",\"cardtextmargin\":\"tweetsCard_cardtextmargin__y-UG5\",\"cardBtn\":\"tweetsCard_cardBtn__LVPGR\",\"loadBtn\":\"tweetsCard_loadBtn__9PTbx\"};","import axios from \"axios\";\r\n\r\naxios.defaults.baseURL = \"https://6469b13a03bb12ac2090ecaf.mockapi.io\";\r\n\r\nexport const fetchUsers = async (page = 1) => {\r\n  let url;\r\n  url = `/users?page=${page}&limit=3`;\r\n  const response = await axios.get(url);\r\n\r\n  return response.data;\r\n};\r\n\r\nexport const fetchAllUsers = async () => {\r\n  let url;\r\n  url = `/users`;\r\n  const response = await axios.get(url);\r\n\r\n  return response.data.length;\r\n};\r\n\r\nexport const updateUser = async (id, following, followers) => {\r\n  const response = await axios.put(`/users/${id}`, { following, followers });\r\n  return response.data;\r\n};\r\n\r\n","import { useState, useEffect } from \"react\";\r\nimport style from \"./tweetsCard.module.css\";\r\nimport logo from \"../../../images/logo.png\";\r\nimport background from \"../../../images/background.png\";\r\nimport { updateUser, fetchUsers, fetchAllUsers } from \"../../../services/api\";\r\nimport { Loader } from \"../../Loader/Loader\";\r\n\r\nexport const TweetsCard = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // useEffect(() => {\r\n  //   fetchAllUsers()\r\n  //     .then((response) => {\r\n  //       setTotalPages(Math.ceil(response / 3));\r\n  //     })\r\n  //     .catch((error) => {\r\n  //       console.log(error);\r\n  //     });\r\n  // });\r\n\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    fetchUsers(currentPage)\r\n      .then((response) => {\r\n        setUsers(response);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(setIsLoading(false));\r\n  }, []);\r\n\r\n  const handleLoadMore = () => {\r\n    const nextPage = currentPage + 1;\r\n    setIsLoading(true);\r\n    fetchUsers(nextPage)\r\n      .then((response) => {\r\n        const uniqueUsers = response.filter(\r\n          (user) => !users.some((existing) => existing.id === user.id)\r\n        );\r\n        setUsers((prevUsers) => [...prevUsers, ...uniqueUsers]);\r\n        setCurrentPage(nextPage);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n      .finally(setIsLoading(false));\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <Loader />;\r\n  }\r\n\r\n  const handleFollow = async (id, following, followers) => {\r\n    try {\r\n      if (following) {\r\n        await updateUser(id, false, followers - 1);\r\n        setUsers((prevUsers) =>\r\n          prevUsers.map((user) => {\r\n            if (user.id === id) {\r\n              return {\r\n                ...user,\r\n                following: false,\r\n                followers: user.followers - 1,\r\n              };\r\n            }\r\n            return user;\r\n          })\r\n        );\r\n      } else {\r\n        await updateUser(id, true, followers + 1);\r\n        setUsers((prevUsers) =>\r\n          prevUsers.map((user) => {\r\n            if (user.id === id) {\r\n              return {\r\n                ...user,\r\n                following: true,\r\n                followers: user.followers + 1,\r\n              };\r\n            }\r\n            return user;\r\n          })\r\n        );\r\n      }\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ul className={style.usersList}>\r\n        {users.map(({ id, tweets, followers, avatar, following }) => (\r\n          <li className={style.userCard} key={id}>\r\n            <img className={style.logo} src={logo} alt=\"Logo\" />\r\n            <img\r\n              className={style.background}\r\n              src={background}\r\n              alt=\"background_photo\"\r\n            />\r\n            <div className={style.Cardline} />\r\n            <div className={style.avatarCircle}>\r\n              <img className={style.avatar} src={avatar} alt=\"user_photo\" />\r\n            </div>\r\n            <p className={style.cardText}>{tweets} weets</p>\r\n            <p className={style.cardtextmargin}>\r\n              {followers.toLocaleString(\"en-Us\")} followers\r\n            </p>\r\n            <button\r\n              className={style.cardBtn}\r\n              style={{ backgroundColor: following ? \"#5CD3A8\" : \"\" }}\r\n              onClick={() => handleFollow(id, following, followers)}\r\n            >\r\n              {following ? \"Following\" : \"Follow\"}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      {currentPage < totalPages && (\r\n        <button className={style.loadBtn} onClick={handleLoadMore}>\r\n          Load More\r\n        </button>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","// extracted by mini-css-extract-plugin\nexport default {\"tweetContainer\":\"Tweets_tweetContainer__Xoxwu\",\"usersTitle\":\"Tweets_usersTitle__u0SD7\"};","\r\nimport { TweetsCard } from \"./TweetCard/TweetsCard\";\r\nimport style from \"./Tweets.module.css\";\r\nconst TweetsPage = ({ isLoading }) => {\r\n\r\n\r\n  return (\r\n    <div className={style.tweetContainer}>\r\n      <h2 className={style.usersTitle}>Users</h2>\r\n      <TweetsCard />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TweetsPage;\r\n"],"names":["axios","fetchUsers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","_args","arguments","wrap","_context","prev","next","concat","length","undefined","sent","abrupt","data","stop","apply","updateUser","_ref3","_callee3","id","following","followers","_context3","_x","_x2","_x3","TweetsCard","_useState","useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","totalPages","_useState7","_useState8","isLoading","setIsLoading","useEffect","then","catch","error","console","log","finally","_jsx","Loader","handleFollow","prevUsers","map","user","_objectSpread","t0","_jsxs","_Fragment","children","className","style","_ref2","tweets","avatar","src","alt","background","toLocaleString","backgroundColor","onClick","nextPage","uniqueUsers","filter","some","existing","_toConsumableArray"],"sourceRoot":""}